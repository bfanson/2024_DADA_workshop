---
title: "Day 1: Getting data into shape"
description: |
  Tidyverse world
author:
  - name: Ben Fanson
    url: https://bfanson.github.io/2024DADAworkshop/
    affiliation: Arthur Rylah Institute
    affiliation_url: https://www.ari.vic.gov.au/
date: 2024-09-04
output:
  distill::distill_article:
    self_contained: true
    toc: true # table of content true
    toc_float: true # make 
    depth: 3  # upto three depths of headings (specified by #, ## and ###)
    number_sections: false  ## if you want number sections at each table header
    code_folding: true # awesome buttons to show/hide the code
draft: false
slug: fanson2024dada
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

# Day's objectives

1)  Understand workflow, why it is important, and how to do it using Rstudio/R
2)  Have an understanding of the tidyverse framework and its key packages
3)  Work through an example

# Key packages

![](images/tidyverse.png){width="10%"} ![](images/tidyr.png){width="10%"} ![](images/dplyr.png){width="10%"} ![](images/stringr.png){width="10%"} ![](images/lubridate.png){width="10%"}

# Example of some workflows

## mine

## Paul's

## Commonalities

# Advantages of workflow

## asfd

## adsf

# Dataset for workshop

For this workshop, we will you an example dataset to go through the whole workflow process.

# Rstudio

You can find a variety of cheatsheets at <https://posit.co/resources/cheatsheets/>

<aside>See Rstudio IDE to Positron <https://github.com/posit-dev/positron/wiki> for note about new IDE</aside>

## Basics

-   assume familiar with
-   might want to turn off .Rdata so everything is fresh on startup (no issues with previous objects so completely reproducible)
-   

## Tips and tricks

-   tab
-   fills in paths
-   hexcode color coating
-   code folding (\#)
-   insert pipe: ctrl+shift+M %\>%
-   comment: ctrl + shift + C
-   find in all files

# Programming good technique

-   consistent style
-   modularize your code (functions - slightly more advanced)

# Tidyverse framework

![](images/tidyverse.png){width="10%"}

## Historical context

-   quirky things about R: factors vs character, NAs,

-   tibble is data.frame v2.0

    -   better printing of the data
    -   handles some of the quirky things that caught up people
    -   column names

-   lubridate fixed date quirks

# Setting up Rproject

## Rproject

## Project directory/folder structure

## Hands-on

::: {#task_rproj .greeting .message style="background: lightgrey;"}
**Your Task** Setup an Rproject for the workshop study

-   Call the Rproject "projectDADA"
-   Create subfolders: data/, R/
:::

# Importing

## Saving the data files

## Excel files

![](images/readxl.png){width="10%"}

Key functions

```{r excvel, eval=F}

  readxl::read_xls()
  readxl::read_xlsx()

```

Tips and tricks

- NAs - defining
- rename columns
- reading in more rows to get column type correct


- setup excel file to have NA


## CSV/Table

![](images/readr.png){width="10%"}

```{r excvel, eval=F}

  readr::read_csv()
  readr::read_table()

```

Advantages
- 

SEtting your column types


## Hands-on

After setting up the folder structure for your project, you need to add your data. Here, you will download the `data/` directory using link below:

```{r dwnldData, eval=T, echo=FALSE, code_folding = FALSE}
library(downloadthis)
  download_dir(
    path='data',
    output_name = "dataProject",
    button_label = "Download data folder for project",
    button_type = "warning",
    has_icon = TRUE,
    icon = "fa fa-save"
  )
```

After the zip file downloads, unzip and drag the `data/` folder to your Rproject folder.

XXXX data/raw, data/rds, data/spatial XXXX

::: {#task_import .greeting .message style="background: lightgrey;"}
**Your Task**

Import your data

-   Call the Rproject `projectDADA`
-   Create subfolders: `data/`, `R/`
-   Create a new r script calls `importData.r` and save in `R/` folder
-   
:::


# Data cleaning

## 


##


# Joins

![](images/dplyr.png){width="10%"}

```{r cheatsheet, out.width='100%', out.height='200%'}
```

knitr::include_graphics("dplyr.pdf")

<br> <br> <br> <br> <br> <br>

Note: joins = merges (synonyms)

## Tips and tricks

-   Essential to make sure that the number of rows out matches your expectation
-   Almost all my joins are

::: {#task_join .greeting .message style="background: lightgrey;"}
**Your Task**
:::

# Restructuring

![](images/tidyr.png){width="10%"}

```{r cheatsheet, out.width='100%', out.height='200%'}
```

knitr::include_graphics("tidyr.pdf")

<br> <br> <br> <br> <br> <br>

::: {#task_shape .greeting .message style="background: lightgrey;"}
**Your Task**
:::

# String manipulation

![](images/stringr.png){width="10%"}

```{r cheatsheet, out.width='100%', out.height='200%'}
```

knitr::include_graphics("stringr.pdf")

<br> <br> <br> <br> <br> <br>

::: {#task_str .greeting .message style="background: lightgrey;"}
**Your Task**
:::

# Date/time

![](images/lubridate.png){width="10%"}

```{r cheatsheet, out.width='100%', out.height='200%'}
  knitr::include_graphics("lubridate.pdf")
```

<br> <br> <br> <br> <br> <br>

::: {#task_date .greeting .message style="background: lightgrey;"}
**Your Task**
:::

# Saving the clean data

At the end of the import and clean stage, I save the dataset as a
